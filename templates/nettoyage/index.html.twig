{% extends 'base.html.twig' %}

{% block title %}Suivi du nettoyage{% endblock %}

{% block body %}
<section class="section">
  <h1 class="section-title">üßΩ Suivi du nettoyage</h1>
  <p class="para">Visualisez vos t√¢ches valid√©es et celles √† faire, et g√©rez facilement le nettoyage quotidien.</p>

  {# ‚úÖ T√¢ches valid√©es r√©cemment #}
  <div class="block-validation">
    <h2 class="section-subtitle">‚úÖ Derni√®res t√¢ches valid√©es</h2>
    {% if validations is not empty %}
      <ul class="task-list task-list-valid">
        {% for validation in validations %}
          <li>
            ‚úÖ <strong>{{ validation.planNettoyage.nom }}</strong><br>
            <small>Valid√©e le {{ validation.date|date('d/m/Y') }}</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="temper">Aucune t√¢che r√©cemment valid√©e.</p>
    {% endif %}
  </div>

  {# ‚ö†Ô∏è T√¢ches non valid√©es #}
  <div class="block-alert">
    <h2 class="section-subtitle">‚ö†Ô∏è T√¢ches non valid√©es</h2>
    {% if nonValides is not empty %}
      <ul class="task-list task-list-alert">
        {% for item in nonValides %}
          {% set plan = item.plan %}
          {% set dateDerniereValidation = item.dateDerniereValidation %}
          <li>
            ‚ö†Ô∏è <strong>{{ plan.nom }}</strong><br>
            <small>
              {% if dateDerniereValidation %}
                Derni√®re validation le {{ dateDerniereValidation|date('d/m/Y') }}
              {% else %}
                Pas de validation enregistr√©e
              {% endif %}
            </small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="temper">Aucune alerte de nettoyage !</p>
    {% endif %}
  </div>

  {# Liens vers les actions #}
  <div class="features">
    <a href="{{ path('app_nettoyage_liste') }}" class="feature-card">
      <h3>üìã Historique complet</h3>
      <p>Voir toutes les validations pass√©es</p>
    </a>

    <a href="{{ path('app_nettoyage_valider') }}" class="feature-card">
      <h3>‚úîÔ∏è Valider les t√¢ches</h3>
      <p>Valider les t√¢ches de nettoyage du jour</p>
    </a>
  </div>
</section>
{% endblock %}
