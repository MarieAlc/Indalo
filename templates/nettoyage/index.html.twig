{% extends 'base.html.twig' %}

{% block title %}Suivi du nettoyage{% endblock %}

{% block body %}
  <section class="section">
    <h1 class="para">üßΩ Suivi du nettoyage</h1>
    <p class="para">Visualisez vos t√¢ches valid√©es et celles √† faire, et g√©rez facilement le nettoyage quotidien.</p>

    {# ‚úÖ T√¢ches valid√©es r√©cemment #}
    <div style="margin-bottom: 2rem;">
      <h2 class="dashboard h2">‚úÖ Derni√®res t√¢ches valid√©es</h2>
      {% if validations is not empty %}
        <ul>
          {% for validation in validations %}
            <li>‚úÖ <strong>{{ validation.planNettoyage.nom }}</strong> ‚Äì valid√©e le {{ validation.date|date('d/m/Y') }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="temper">Aucune t√¢che r√©cemment valid√©e.</p>
      {% endif %}
    </div>

    {# ‚ö†Ô∏è T√¢ches non valid√©es #}
    <div style="margin-bottom: 2rem;">
      <h2 class="dashboard h2">‚ö†Ô∏è T√¢ches non valid√©es</h2>
      {% if nonValides is not empty %}
        <ul>
          {% for item in nonValides %}
            {% set plan = item.plan %}
            {% set dateDerniereValidation = item.dateDerniereValidation %}
            <li style="color: red;">
              ‚ö†Ô∏è <strong>{{ plan.nom }}</strong> n‚Äôa pas √©t√© valid√©e.
              {% if dateDerniereValidation %}
                Derni√®re validation le {{ dateDerniereValidation|date('d/m/Y') }}
              {% else %}
                Pas de validation enregistr√©e
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="temper">Aucune alerte de nettoyage !</p>
      {% endif %}
    </div>

    {# Liens vers les actions #}
    <div class="features">
      <a href="{{ path('app_nettoyage_liste') }}" class="feature-card">
        <h3>üìã Historique complet</h3>
        <p>Voir toutes les validations pass√©es</p>
      </a>

      <a href="{{ path('app_nettoyage_valider') }}" class="feature-card">
        <h3>‚úîÔ∏è Valider les t√¢ches</h3>
        <p>Valider les t√¢ches de nettoyage du jour</p>
      </a>
    </div>
  </section>
{% endblock %}
