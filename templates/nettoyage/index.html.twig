{% extends 'base.html.twig' %}

{% block title %}Suivi du nettoyage{% endblock %}

{% block body %}
  <h1>üßΩ Suivi du nettoyage</h1>

  {# SECTION : Derni√®res t√¢ches valid√©es #}
  <section style="margin-bottom: 2rem;">
    <h2>‚úÖ Derni√®res t√¢ches valid√©es</h2>

    {% if validations is not empty %}
      <ul>
        {% for validation in validations %}
          <li>
            ‚úÖ <strong>{{ validation.planNettoyage.nom }}</strong> ‚Äì valid√©e le {{ validation.date|date('d/m/Y') }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Aucune t√¢che r√©cemment valid√©e.</p>
    {% endif %}
  </section>

  {# SECTION : Avertissement sur les t√¢ches non valid√©es #}
  <section style="margin-bottom: 2rem;">
    <h2>‚ö†Ô∏è T√¢ches non valid√©es</h2>

    {% if nonValides is not empty %}
      <ul>
        {% for item in nonValides %}
          {% set plan = item.plan %}
          {% set dateDerniereValidation = item.dateDerniereValidation %}
          <li style="color: red;">
            ‚ö†Ô∏è <strong>{{ plan.nom }}</strong> n‚Äôa pas √©t√© valid√©e.
            {% if dateDerniereValidation %}
              Derni√®re validation le {{ dateDerniereValidation|date('d/m/Y') }}
            {% else %}
              Pas de validation enregistr√©e
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Aucune alerte de nettoyage !</p>
    {% endif %}
  </section>

  {# SECTION : Liens vers actions #}
  <section style="display: flex; gap: 2rem; flex-wrap: wrap;">
    <a href="{{ path('app_nettoyage_liste') }}" class="btn-link">
      üìã Voir l'historique complet
    </a>

    <a href="{{ path('app_nettoyage_valider') }}" class="btn-link">
      ‚úîÔ∏è Valider les t√¢ches du jour
    </a>
  </section>

{% endblock %}
