{% extends 'base.html.twig' %}

{% block title %}Bienvenue{% endblock %}

{% block body %}

{% if not app.user %}
    <section class="section">
        <div class="para">
            <h1>ğŸ‘‹ Bienvenue sur votre outil de gestion</h1>
            <p>Ce site vous permet de suivre la tempÃ©rature de vos produits, de gÃ©rer la traÃ§abilitÃ© et bien plus encore.</p>
            <p>Pour commencer, veuillez vous connecter.</p>
        </div>

        <div class="para">
            <a href="{{ path('app_login') }}" class="btn-cta">ğŸ” Connectez-vous</a>
            <p>Si vous n'avez pas de compte, veuillez contacter l'administrateur.</p>
        </div>
    </section>

    <section class="section">
        <h2>ğŸ› ï¸ FonctionnalitÃ©s</h2>
        <div class="features">
            <div class="feature-card">
                <h3>ğŸŒ¡ï¸ Suivi des tempÃ©ratures</h3>
                <p>GÃ©rez les relevÃ©s de tempÃ©ratures en cuisine ou en chambre froide.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ“¦ TraÃ§abilitÃ© des produits</h3>
                <p>Consultez l'historique des entrÃ©es et sorties de vos produits pour une sÃ©curitÃ© optimale.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ§¼ Suivi des nettoyages</h3>
                <p>Consignez toutes vos actions de nettoyage pour garantir lâ€™hygiÃ¨ne.</p>
            </div>
        </div>
    </section>
{% endif %}

{% if app.user %}
    <div class="para">
        <h2>ğŸ‘‹ Bienvenue, {{ app.user.prenom }} !</h2>
    </div>

    <section class="section">
        <h2>âš ï¸ TÃ¢ches non validÃ©es</h2>

        {% if nonValides is not empty %}
            <ul>
                {% for item in nonValides %}
                    {% set plan = item.plan %}
                    {% set dateDerniereValidation = item.dateDerniereValidation %}
                    <li style="color: red;">
                        âš ï¸ <strong>{{ plan.nom }}</strong> nâ€™a pas Ã©tÃ© validÃ©e.
                        {% if dateDerniereValidation %}
                            DerniÃ¨re validation le {{ dateDerniereValidation|date('d/m/Y') }}
                        {% else %}
                            Pas de validation enregistrÃ©e
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>âœ… Aucune alerte de nettoyage !</p>
        {% endif %}
    </section>

    <section class="section">
        <h2>ğŸ“‚ CatÃ©gories</h2>
        <div class="features">
            <div class="feature-card">
                <a href="{{ path('app_temperature') }}">
                    <strong>ğŸŒ¡ï¸ TempÃ©ratures</strong>
                    <p>ContrÃ´le des tempÃ©ratures des frigos</p>
                </a>
            </div>

            <div class="feature-card">
                <a href="{{ path('app_congelation') }}">
                    <strong>â„ï¸ CongÃ©lation</strong>
                    <p>Entrez vos dates de congÃ©lation</p>
                </a>
            </div>

            <div class="feature-card">
                <a href="{{ path('app_nettoyage') }}">
                    <strong>ğŸ§½ Nettoyage</strong>
                    <p>Suivi des entretiens de la cuisine</p>
                </a>
            </div>

            <div class="feature-card">
                <a href="{{ path('app_tracabilite') }}">
                    <strong>ğŸ“¦ TraÃ§abilitÃ©s</strong>
                    <p>Suivez vos produits</p>
                </a>
            </div>
        </div>
    </section>
{% endif %}

{% endblock %}
